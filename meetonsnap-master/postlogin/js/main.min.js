var CONTROLLERURL="php/controller.php",CONTACTLIST=[],CONTACTSTATUS=[],INVITELIST={},CURRENTCHAT="",CURRENTCHATJID="",CURRENTWEBRTCNODE="",PREVIOUSACTCHAT="",TEMPMESSAGES={},CURRENTTAB="",EMAILVERIFYSTATUS=0,CANWEBRTC_BROWSER=0,BRWVERSION=0,STUN,TURN,ice_config,ISLOGOUT=0,ISCHROME=0,ISFIREFOX=0,ISOPERA=0,CALLDUR=[0,0],SYSMESSAGES={"SNAP::INCOMPATIBLEBROWSER":"Request cannot be processed.<br />Your browser is not compatible for this service.<br />Kindly download Firefox( >= 34) or Google Chrome (>= 31) or Opera (>=27)","SNAP::INCOMPATIBLEBROWSERDETECTED":"Request declined, since end-users browser in not compatible","SNAP::VIDEO_CHAT":"you sent a video chat request","SNAP::AUDIO_CHAT":"you sent an audio chat request","SNAP::VIDEO_CHAT_RCVD":"you have received a video chat request","SNAP::AUDIO_CHAT_RCVD":"you have received an audio chat request","SNAP::VIDEO_CHAT_ACCEPTED":"you accepted a video chat request","SNAP::AUDIO_CHAT_ACCEPTED":"you accepted an audio chat request","SNAP::VIDEO_CHAT_DECLINED":"you declined a video chat request","SNAP::AUDIO_CHAT_DECLINED":"you declined an audio chat request","SNAP::VIDEO_CHAT_ACCEPTED_RCVD":"your video chat request was accepted","SNAP::AUDIO_CHAT_ACCEPTED_RCVD":"your audio chat request was accepted","SNAP::VIDEO_CHAT_DECLINED_RCVD":"your video chat request was declined","SNAP::AUDIO_CHAT_DECLINED_RCVD":"your audio chat request was declined","SNAP::BUSY_SIG":"Cannot proceed. Responder is busy on another call","SNAP::NO_HARDWARE":"Cannot proceed. You dont have required hardware to make this call","SNAP::DENIED_HARDWARE":"Cannot proceed. You have denied access to required hardware","SNAP::BUSY_HARDWARE":"Cannot proceed. Your required hardware is already in use","SNAP::ERR_HARDWARE":"Cannot proceed. Failed to allow access required hardware","SNAP::END_CALL":"Call ended","SNAP::NO_HARDWARE_RESP":"Cannot proceed. User does not have required hardware to make this call","SNAP::DENIED_HARDWARE_RESP":"Cannot proceed. User have denied access to required hardware","SNAP::BUSY_HARDWARE_RESP":"Cannot proceed. User's required hardware is already in use","SNAP::ERR_HARDWARE_RESP":"Cannot proceed. User failed to allow access required hardware"},snapExecAjax=function(a){$.post(CONTROLLERURL,{data:a}).done(function(e){successCallback(e,a.action)}).fail(function(){console.log("AJAX failed")})},successCallback=function(a,e){var s=a.type;if("success"==s)switch(e){case"snapLoginUser":case"snapAddNewUser":window.location.href="?page=dashboard";break;case"snapLoadStunTurn":void 0!=a.ice_servers[0]&&""!=a.ice_servers[0]?(STUN=a.ice_servers[0],TURN=a.ice_servers[1],ice_config={iceServers:[STUN,TURN]},console.log(STUN),console.log(TURN)):snapcheckStunTurn();break;case"snapGetContactList":snapManageContactList(a.contactlist);break;case"snapInviteUser":snapNotifyBox(a.descr);var n=a.respdata;webRtcConnection.roster.add(n.xmppjid,n.username,[]);break;case"snapGetInvitees":if(0==EMAILVERIFYSTATUS){var i=a.emailverifystatus;EMAILVERIFYSTATUS=i,0==i?($("#snapEmailVerifyBox").attr("style","padding-top:275px;padding-bottom:400px;"),$("#snapEmailVerifyBox").show()):1==i?snapLoadNavClick("Dashboard"):$("#snapEmailVerifyBox").hide()}INVITELIST={},$.each(a.invitelist,function(a,e){INVITELIST[e.id]=e});var t=Object.keys(INVITELIST).length;$("#inviteCount").html(t>0?"("+t+")":""),buildInviteList();break;case"snapAcceptInvite":case"snapRejectInvite":if(snapNotifyBox(a.descr),buildInviteList(),"snapAcceptInvite"==e){var o=INVITELIST[a.tblid].xmppjid,d=INVITELIST[a.tblid].username;webRtcConnection.roster.add(o,d,[])}delete INVITELIST[a.tblid];break;case"snapSendChangePasswordLink":snapNotifyBox(a.descr),$("#snapResetPassContainer").hide(),$("#snapOnResetPassContainer").show();break;case"snapSavePassword":$("#snapResetPassContainer").hide(),$("#snapOnResetPassContainer").show();break;case"snapSendVerificationEmailLink":snapNotifyBox(a.descr);break;case"snapSendFeedback":snapNotifyBox(a.descr),window.scrollTo(0,0);break;case"snapGetPreviousChatMessages":var r="",p="";10==a.msgcount&&(p+=snapAddChatMessage("<a href='javascript:void(0);' onclick='$(\"#snapLoadMoreMessage\").hide();snapGetPreviousChatMessages(\""+a.withjid+'",'+a.lastrecid+");'>load earlier messages</a>","loadmore",1)),$.each(a.previousmessages,function(a,e){e.msgdate!=r&&(r=e.msgdate,p+=snapAddChatMessage("<span>"+e.msgdate+"</span>","msgdate",1));var s="recvmess";e.fromjid==MYBAREJID&&(s="sentmess"),-1==e.message.indexOf("SNAP::")&&(p+=snapAddChatMessage(e.message,s,e.entered))});var c=$("#snapChatDiv"+CURRENTCHAT).html();$("#snapChatDiv"+CURRENTCHAT).html(p+""+c),$("#snapChatDivScroll"+CURRENTCHAT).mCustomScrollbar("scrollTo",["top"])}else"failed"==s&&snapNotifyBox(a.descr,"error")},snapNotifyBox=function(a,e){"undefined"==typeof e&&(e="success");var s="snapFailedNotify";"success"==e&&(s="snapSuccessNotify"),$("#snapNotifyBox").removeClass("snapSuccessNotify snapFailedNotify"),$("#snapNotifyBox").addClass(s).html(a).show(),setTimeout(function(){$("#snapNotifyBox").hide()},5e3)},snapLogout=function(){webRtcConnection.send($pres({type:"unavailable"})),ISLOGOUT=1,$(window).unbind("beforeunload"),window.location.href="?page=logout"},snapTimeNow=function(a){var e=new Date;if(""!=a&&void 0!=a)var e=new Date(a);var s=(e.getHours()<10?"0":"")+e.getHours(),n=(e.getMinutes()<10?"0":"")+e.getMinutes(),i={date:e,hour:s,min:n};return i},snapResizeContainer=function(){var a=$(window).width(),e=$("#snapLeftPane").height();$("#snapContactList").height(e+"px");var s=275;$("#snapLeftPane").width(s+"px");var n=a-275-25;$("#snapContainerDiv").width(n+"px")},snapValidateEmail=function(a){var e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e.test(a)},snapShowError=function(a){$.each(a,function(a,e){$("#"+e).addClass("snaperror"),$("#"+e+"err").show()})},snapHideError=function(a){var e=a.id;$("#"+e).removeClass("snaperror"),$("#"+e+"err").hide()},snapShowHideCallCtrls=function(a){var e=$("#videoChatReq"+CURRENTCHAT),s=$("#audioChatReq"+CURRENTCHAT),n=$("#muteaudio"+CURRENTCHAT),i=$("#unmuteaudio"+CURRENTCHAT),t=$("#endcall"+CURRENTCHAT),o=$("#snapVideoContainer"+CURRENTCHAT),d=$("#snapChatContainer"+CURRENTCHAT),r=$("#snapChatTxtDiv"+CURRENTCHAT);"callrequest"==a?(e.hide(),s.hide()):"callactive"==a?(e.hide(),s.hide(),t.show(),n.show()):"callend"==a?($("#snapMic"+CURRENTWEBRTCNODE).hide(),$("#snapLoader"+CURRENTWEBRTCNODE).hide(),e.show(),s.show(),t.hide(),n.hide(),i.hide(),o.hide().html(""),d.removeClass("smallChatContainer"),r.removeClass("smallChatContainer")):"callmute"==a?(n.hide(),i.show()):"callunmute"==a&&(n.show(),i.hide())},snapIsStrongPassword=function(a){return a.length<6?0:a.match(/[a-z]/)&&a.match(/[A-Z]/)&&a.match(/[0-9]/)?1:0},snapLogin=function(){var a=$("#snaploginemailaddress").val(),e=$("#snaploginpassword").val(),s=new Array;return""==a&&s.push("snaploginemailaddress"),""==e&&s.push("snaploginpassword"),a&&!snapValidateEmail(a)&&s.push("snaploginemailaddress"),s.length>0?void snapShowError(s):void snapLoginUser(a,e)},snapForgotPassword=function(){$("#snapLoginContainer").hide(),$("#snapForgotPasswordContainer").show()},snapSendChangePassword=function(){var a=$("#snapforgotpasswordemailaddress").val(),e=new Array;return""==a&&e.push("snapforgotpasswordemailaddress"),a&&!snapValidateEmail(a)&&e.push("snapforgotpasswordemailaddress"),e.length>0?void snapShowError(e):void snapSendChangePasswordLink(a)},snapSaveChangePassword=function(){var a=new Array,e=$("#snapsaveemailaddress").val();""==e&&a.push("snapsaveemailaddress"),e&&!snapValidateEmail(e)&&a.push("snapsaveemailaddress");var s=$("#snapsavenewpassword").val();return""==s&&a.push("snapsavenewpassword"),s&&!snapIsStrongPassword(s)&&a.push("snapsavenewpassword"),a.length>0?void snapShowError(a):void snapSavePassword(e,s)},snapShowLoginForm=function(){$("#snapLoginContainer").show(),$("#snapForgotPasswordContainer").hide()},snapSignup=function(){var a=$("#snapsignupusername").val(),e=$("#snapsignuppassword").val(),s=$("#snapsignupemailaddress").val(),n=new Array;return""==a&&n.push("snapsignupusername"),""==e&&n.push("snapsignuppassword"),e&&!snapIsStrongPassword(e)&&n.push("snapsignuppassword"),""==s&&n.push("snapsignupemailaddress"),s&&!snapValidateEmail(s)&&n.push("snapsignupemailaddress"),n.length>0?void snapShowError(n):void snapAddNewUser(a,e,s)},snapLoginUser=function(a,e){var s={action:"snapLoginUser",emailaddress:a,password:e};snapExecAjax(s)},snapAddNewUser=function(a,e,s){var n={action:"snapAddNewUser",username:a,emailaddress:s,password:e};snapExecAjax(n)},snapSavePassword=function(a,e){var s={action:"snapSavePassword",emailaddress:a,password:e,linkid:$("#linkid").val()};snapExecAjax(s)},snapSendChangePasswordLink=function(a){var e={action:"snapSendChangePasswordLink",emailaddress:a};snapExecAjax(e)},snapSendVerificationEmailLink=function(){var a={action:"snapSendVerificationEmailLink"};snapExecAjax(a)},snapGetPreviousChatMessages=function(a,e){var s={action:"snapGetPreviousChatMessages",myjid:MYBAREJID,chatwithjid:a,recordid:e};snapExecAjax(s)},snapLoadStunTurnCreds=function(){var a={action:"snapLoadStunTurn"};snapExecAjax(a)},snapGetContactList=function(){var a={action:"snapGetContactList"};snapExecAjax(a)},snapRejectInvite=function(a){var e=INVITELIST[a].userid,s={action:"snapRejectInvite",contactid:e,tblid:a};snapExecAjax(s)},snapAcceptInvite=function(a){var e=INVITELIST[a].userid,s={action:"snapAcceptInvite",contactid:e,tblid:a};snapExecAjax(s)},snapInviteUser=function(a){var e={action:"snapInviteUser",emailaddress:a};snapExecAjax(e)},snapGetInvitees=function(){var a={action:"snapGetInvitees"};snapExecAjax(a),setTimeout(snapGetInvitees,1e4)},snapSendFeedback=function(a,e,s){var n={action:"snapSendFeedback",emailaddress:a,name:e,message:s};snapExecAjax(n)},snapcheckStunTurn=function(){return void 0==STUN||""==STUN||""==TURN||void 0==TURN?(snapNotifyBox("Oops, cannot proceed with the call at this moment. Retry after sometime","error"),0):1},snapSendVideoCallReq=function(){if(0==CANWEBRTC_BROWSER)return void snapAddChatMessage(SYSMESSAGES["SNAP::INCOMPATIBLEBROWSER"],"sentmess");var a=snapcheckStunTurn();0!=a&&getMediaAudioVideo("initiator","video")},snapSendAudioCallReq=function(){if(0==CANWEBRTC_BROWSER)return void snapAddChatMessage(SYSMESSAGES["SNAP::INCOMPATIBLEBROWSER"],"sentmess");var a=snapcheckStunTurn();0!=a&&getMediaAudioVideo("initiator","audio")},snapAcceptVideoChat=function(){if(0==CANWEBRTC_BROWSER){$("#snapStickyMsg"+CURRENTCHAT).html("").hide(),snapAddChatMessage(SYSMESSAGES["SNAP::INCOMPATIBLEBROWSER"],"sentmess");var a="SNAP::INCOMPATIBLEBROWSERDETECTED";return void snapSendMessage(CURRENTCHATJID,a)}var e=snapcheckStunTurn();0!=e&&getMediaAudioVideo("responder","video")},snapAcceptAudioChat=function(){if(0==CANWEBRTC_BROWSER){$("#snapStickyMsg"+CURRENTCHAT).html("").hide(),snapAddChatMessage(SYSMESSAGES["SNAP::INCOMPATIBLEBROWSER"],"sentmess");var a="SNAP::INCOMPATIBLEBROWSERDETECTED";return void snapSendMessage(CURRENTCHATJID,a)}var e=snapcheckStunTurn();0!=e&&getMediaAudioVideo("responder","audio")},snapDeclineVideoChat=function(){$("#snapStickyMsg"+CURRENTCHAT).html("").hide();var a="SNAP::VIDEO_CHAT_DECLINED";snapSendMessage(CURRENTCHATJID,a),snapAddChatMessage(SYSMESSAGES["SNAP::VIDEO_CHAT_DECLINED"],"sentmess"),snapShowHideCallCtrls("callend")},snapDeclineAudioChat=function(){$("#snapStickyMsg"+CURRENTCHAT).html("").hide();var a="SNAP::AUDIO_CHAT_DECLINED";snapSendMessage(CURRENTCHATJID,a),snapAddChatMessage(SYSMESSAGES["SNAP::AUDIO_CHAT_DECLINED"],"sentmess"),snapShowHideCallCtrls("callend")},snapContactDetails=function(a){var e=CONTACTLIST[a],s=CONTACTLIST[a].xmppjid,n=s.trim().replace(/[^a-z0-9]+/gi,"_");$("#chatcount_"+n).html("").hide(),""==CURRENTCHAT?(CURRENTCHAT=n,CURRENTCHATJID=s):CURRENTCHAT!=n&&(PREVIOUSACTCHAT=CURRENTCHAT,$("#curChat"+PREVIOUSACTCHAT).hide(),CURRENTCHAT=n,CURRENTCHATJID=s);var i="";1==WEBRTCCALLSTATUS&&CURRENTCHAT!=CURRENTWEBRTCNODE&&(i="style='display:none;'");var t="curChat"+n;if(!$("#"+t).length){var o=$("#snapLeftPane").height(),d=.8*o,r=d-90,p="<div id='"+t+"'>";p+="<div class='snapSelectedContactDetails' id='snapSelectedContactDetails"+n+"'>",p+="<div class='snapSelContactImage'></div><div class='snapSelContactDet'>",p+="<span class='snapSelContactName'>"+e.username+"</span><br />",p+="<span class='snapSelContactEmail'>"+e.emailaddress+"</span></div>",p+="<div class='snapSelContactVideo' "+i+" id='videoChatReq"+n+"' onclick='snapSendVideoCallReq();'></div>",p+="<div class='snapSelContactAudio' "+i+" id='audioChatReq"+n+"' onclick='snapSendAudioCallReq();'></div>",p+="<div class='snapSelEndcall' "+i+" id='endcall"+n+"' onclick='snapEndCall();'></div>",p+="<div class='snapSelMuteAudio' "+i+" id='muteaudio"+n+"' onclick='snapMuteAudio();'></div>",p+="<div class='snapSelUnmuteAudio' "+i+" id='unmuteaudio"+n+"' onclick='snapUnMuteAudio();'></div></div>",p+="<div class='snapChatDiv'><div class='snapStickyMsg' id='snapStickyMsg"+n+"'></div>",p+="<div class='snapLoaderWrapper' id='snapLoader"+n+"'>",p+="<div class='snapLoader'></div>",p+="<div class='snapLoaderMsg'>calling...please wait</div>",p+="</div>",p+="<div class='snapMic' id='snapMic"+n+"'></div>",p+="<div class='snapCallActiveSince' id='snapCallActiveSince"+n+"'></div>",p+="<div class='snapVideoContainer' id='snapVideoContainer"+n+"'></div>",p+="<div class='snapChatContainer' id='snapChatContainer"+n+"' style='height:"+d+"px !important'>",p+="<div id='snapChatDivScroll"+n+"' class='snapChatDivScroll' style='height:"+r+"px !important'>",p+="<div id='snapChatDiv"+n+"'></div>",p+="</div><div class='snapChatTxtDiv' id='snapChatTxtDiv"+n+"'>",p+="<form onsubmit='return false;'><div class='row half'><div class='12u'>",p+="<input type='text' id='snapTextAreaMessage"+n+"' onkeypress='snapcheckEnter(event,\""+s+"\");' placeholder='chat message'  value='' class='snapchattextmessage' maxlength='250' />",p+="</div></div></form></div></div></div></div>",$("#snapContainerDiv").append(p),$("#snapChatDivScroll"+n).mCustomScrollbar({theme:"dark-3"}),snapGetPreviousChatMessages(s,0)}1==WEBRTCCALLSTATUS&&CURRENTCHAT!=CURRENTWEBRTCNODE&&$("#videoChatReq"+n+",#audioChatReq"+n+",#endcall"+n+",#muteaudio"+n+",#unmuteaudio"+n).hide(),$("#"+t).show(),snapLoadTempMsgsRcvd(s),$("#snapContainerDiv").show()},snapLoadTempMsgsRcvd=function(a){void 0!=TEMPMESSAGES[a]&&($.each(TEMPMESSAGES[a],function(a,e){snapAddChatMessage(e,"recvmess")}),TEMPMESSAGES[a]=[])},snapHomeCheckEnter=function(a,e){13==a.which&&("login"==e?snapLogin():"signup"==e?snapSignup():"forgot"==e&&snapSendChangePassword())},snapcheckEnter=function(a){13==a.which&&snapSendChatMessage()},snapEndCall=function(){snapShowHideCallCtrls("callend"),endCallToVisitor();var a="SNAP::END_CALL";snapAddChatMessage(SYSMESSAGES["SNAP::END_CALL"],"sentmess"),snapSendMessage(CURRENTCHATJID,a),stopLocalMedia()},snapMuteAudio=function(){snapShowHideCallCtrls("callmute"),muteUnmuteAudio(0)},snapUnMuteAudio=function(){snapShowHideCallCtrls("callunmute"),muteUnmuteAudio(1)},snapSendChatMessage=function(){var a=$("#snapTextAreaMessage"+CURRENTCHAT).val();return a=a.trim(),""!=a?($("#snapTextAreaMessage"+CURRENTCHAT).val(""),snapAddChatMessage(a,"sentmess"),snapSendMessage(CURRENTCHATJID,a),!1):void 0},snapAddChatMessage=function(a,e,s){"undefined"==typeof s&&(s="");var n="chatRightIcon";"sentmess"==e&&(n="chatLeftIcon");var i=snapTimeNow(s),t=i.date,o=i.hour+":"+i.min;if("sentmess"==e){var d='<div class="snapSentMessageContainer">';d+='<div class="snapContactIconAvail '+n+'"></div>',d+='<div class="snapSentMessageSpan" >'+a+"</div>",d+='<div class="snapSentTime" title="'+t+'">'+o+"</div>",d+="</div>"}else if("recvmess"==e){var d='<div class="snapRecvMessageContainer">';d+='<div class="snapContactIconAvail '+n+'"></div>',d+='<div class="snapRecvMessageSpan" >'+a+"</div>",d+='<div class="snapRecvTime" title="'+t+'">'+o+"</div>",d+="</div>"}else if("loadmore"==e)var d="<div class='snapLoadMoreMessage' id='snapLoadMoreMessage'><div class='snapLoadMoreInner'>"+a+"</div></div>";else if("msgdate"==e)var d="<div class='snapLoadMessageOf'>"+a+"</div>";return""!=s?d:($("#snapChatDiv"+CURRENTCHAT).append(d),void $("#snapChatDivScroll"+CURRENTCHAT).mCustomScrollbar("scrollTo",["bottom"]))},snapSendMessage=function(a,e,s){"undefined"==typeof s&&(s="chat");var n=$msg({to:a,type:"chat",msgtype:s,id:"msg"+Math.floor(1e3*Math.random()+1)}).c("body").t(e).up().c("active",{xmlns:"http://jabber.org/protocol/chatstates"});webRtcConnection.send(n)},snapManageContactList=function(a){return $("#snapContactList").html(""),$("#snapZeroContacts, #snapMainDiv").hide(),a.length<=0?void $("#snapZeroContacts").show():($("#snapMainDiv").show(),$.each(a,function(a,e){var s=e.xmppjid.trim().replace(/[^a-z0-9]+/gi,"_"),n="";CONTACTLIST[e.contactid]=e;var i="snapContactIconUnAvail";void 0==TEMPMESSAGES[e.xmppjid]&&(TEMPMESSAGES[e.xmppjid]=[]);var t="";TEMPMESSAGES[e.xmppjid].length>0&&(t="("+TEMPMESSAGES[e.xmppjid].length+")"),void 0!=CONTACTSTATUS[e.xmppjid]&&1==CONTACTSTATUS[e.xmppjid]&&(i="snapContactIconAvail"),n+="<div class='snapContactMe' id='node_"+s+"' onclick='snapContactDetails("+e.contactid+");'>",n+="<span class='"+i+"' id='node_icon_"+s+"'></span>",n+="<div class='snapContact'>"+e.username+"<span id='chatcount_"+s+"' class='snapinvitecount'>"+t+"</span></div>",n+="</div>",$("#snapContactList").append(n);var o=$pres({to:e.xmppjid,type:"subscribe"});webRtcConnection.send(o)}),void $("#snapContactListScroll").mCustomScrollbar({theme:"dark-3"}))},snapLoadNavClick=function(a){if($("#snapDashboardSection, #snapChatSection, #snapInviteeSection, #snapGroupSection").hide(),0!=EMAILVERIFYSTATUS){$("#snapEmailVerifyBox").hide();if("Dashboard"==a)CURRENTTAB="dashboard",$("#snapDashboardSection").attr("style","padding-top:275px;padding-bottom:400px;"),$("#snapDashboardSection").show();else if("Chat"==a){$("#unreadchat").hide().html(""),CURRENTTAB="chat",snapGetContactList();var e=$(window).height(),s="150px";e>800&&(s="450px"),$("#snapChatSection").attr("style","padding-top:450px;padding-bottom:"+s),$("#snapChatSection").show()}else"Invitee"==a?(CURRENTTAB="invitee",$("#snapInviteeSection").attr("style","padding-top:50px;padding-bottom:400px;"),$("#snapInviteeSection").show()):"Group"==a&&(CURRENTTAB="group",$("#snapGroupSection").attr("style","padding-top:50px;padding-bottom:400px;"),$("#snapGroupSection").show())}},snapLoadInit=function(){CURRENTCHAT="",CURRENTCHATJID="",loadWebRTC(),snapGetInvitees(),$(window).resize(function(){snapResizeContainer()}),$(window).unload(function(){return 1==ISLOGOUT?!1:void(webRtcConnection&&webRtcConnection.connected&&(webRtcConnection.options.sync=!0,webRtcConnection.flush(),webRtcConnection.disconnect()))}),snapResizeContainer(),buildInviteList()},buildInviteList=function(){var a="";$.each(INVITELIST,function(e,s){a+="<div class='snapInviteBox'>",a+="<span class='snapInviteIcon'></span>",a+="<div class='snapInvite'>"+s.username+" ("+s.emailaddress+")</div>",a+="<div class='snapRejectInvite' onclick='snapRejectInvite("+e+");'></div>",a+="<div class='snapAcceptInvite' onclick='snapAcceptInvite("+e+");'></div>",a+="<div>"});var e=Object.keys(INVITELIST).length;e>0?($("#snapInviteBox").html(a),$("#snapInviteContainer").show()):($("#snapInviteContainer").hide(),$("#snapInviteBox").html("")),$("#snapInviteContainer").mCustomScrollbar({theme:"dark-3"})},snapInvite=function(){var a=$("#snapinviteemailaddress").val(),e=new Array;return""==a&&e.push("snapinviteemailaddress"),a&&!snapValidateEmail(a)&&e.push("snapinviteemailaddress"),e.length>0?void snapShowError(e):($("#snapinviteemailaddress").val(""),void snapInviteUser(a))},snapRejectCall=function(a,e){snapSendMessage(e,a)},snapSendFeedbackForm=function(){var a=$("#snapContactEmail").val(),e=$("#snapContactName").val(),s=$("#snapContactMessage").val(),n=new Array;return""==e&&n.push("snapContactName"),""==s&&n.push("snapContactMessage"),""==a&&n.push("snapContactEmail"),a&&!snapValidateEmail(a)&&n.push("snapContactEmail"),n.length>0?void snapShowError(n):($("#snapContactEmail, #snapContactName, #snapContactMessage").val(""),void snapSendFeedback(a,e,s))};
